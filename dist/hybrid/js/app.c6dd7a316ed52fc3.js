/*! Entersoft Application Server WEB API - v1.13.0 - 2016-11-28
* Copyright (c) 2016 Entersoft SA; Licensed Apache-2.0 */
!function(a){"use strict";function b(a,b,c){a.isReady=!1,b.subscribe("ES_HTTP_CORE_ERR",function(a,b){var d=c.getUserMessage(a,b);alert(d.messageToShow)}),c.getESUISettings().mobile=window.esDeviceMode,c.getESUISettings().defaultGridHeight=window.esGridHeight}function c(b,c,d,e){window.esWebApiToken&&(c.setWebApiToken(window.esWebApiToken),a.isFunction(e)&&e(),b.isReady=!0)}var d=a.module("esWebPqApp",["ngStorage","ui.router","es.Services.Web","kendo.directives","underscore","es.Web.UI","ui.bootstrap","uiGmapgoogle-maps"]);d.config(["$logProvider","esWebApiProvider","uiGmapGoogleMapApiProvider","$translateProvider",function(a,b,c,d){var e=window.esWebApiSettings||{host:"eswebapi.entersoft.gr"};b.setSettings(e),d.useStaticFilesLoader({files:[{prefix:"languages/eswebapi-locale-",suffix:".json"}]}),d.preferredLanguage("el"),d.fallbackLanguage("en"),d.useSanitizeValueStrategy("escape"),c.configure({key:"AIzaSyDCds_w5v7aruDExi6j-mAldpyBi3IwQFk",libraries:"weather,geometry,visualization"})}]),d.controller("esComponentCtrl",["$scope","$log","$window","esMessaging","esWebApi","esUIHelper","esGlobals","uiGmapGoogleMapApi",function(d,e,f,g,h,i,j,k){b(d,g,j);var l=f.navigator.language||f.navigator.userLanguage;d.esCredentials={},d.esCredentials.LangID=j.suggestESLanguageID(l),d.authenticate=function(){h.openSession(d.esCredentials).then(function(a){window.esWebApiToken=j.getWebApiToken(),m(),d.isReady=!0},function(a){d.isReady=!1;j.getUserMessage(a)})};var m=function(){var b;b=a.isArray(window.esDef)?_.map(esDashboardDefinitions,function(a){var b=(new j.ESPublicQueryDef).initFromObj(a.esDef);return qDef.ESUIType=a.ESUIType.toLowerCase(),b.AA=a.AA,b}):(new j.ESPublicQueryDef).initFromObj(window.esDef),d.esPqDef=b};c(d,j,h,m)}])}(window.angular);