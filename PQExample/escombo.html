<!DOCTYPE html>
<html ng-app="esWebPqApp">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <title>Entersoft Mobile Public Query Viewer</title>
    <!-- <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="lib/telerik/styles/kendo.common-bootstrap.min.css" />
    <link rel="stylesheet" href="lib/telerik/styles/kendo.bootstrap.min.css" />
    <link rel="stylesheet" href="lib/telerik/styles/kendo.dataviz.min.css" />
    <link rel="stylesheet" href="lib/telerik/styles/kendo.dataviz.bootstrap.min.css" /> -->
    <link rel="stylesheet" href="dist/es.all.css" />
    <link rel="stylesheet" href="styles.css" />
</head>

<body ng-cloak>
    <div ng-cloak>
        <div ng-controller="esComboCtrl">
            <div class="esdashboard">
                <div class="esdashboarditem" ng-repeat="dbItem in esPqDef | orderBy:'AA'">
                    <es-web-pq ng-if="dbItem.ESUIType == 'esgrid'" es-group-id="dbItem.GroupID" es-srv-paging="dbItem.serverSidePaging" es-params-values="dbItem.Params" es-filter-id="dbItem.FilterID">
                    </es-web-pq>
                    <es-chart ng-if="dbItem.ESUIType == 'eschart'" es-pq-def="dbItem" es-chart-options="dbItem.options">
                    </es-chart>

                    <es-map-pq ng-if="dbItem.ESUIType == 'esmap'" 
                                es-map-options="dbItem.options" 
                                es-pq-def="dbItem" 
                                es-type="dbItem.mapType" 
                                es-type-options="dbItem.typeOptions" 
                                es-map-control="dbItem.mapCtrl">
                    </es-map-pq>
                    <hr/>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
    function prepareMobileCall() {
        window.esWebApiSettings = {
            "host": "192.168.1.190/eswebapijti",
            subscriptionId: "",
            bridgeId: "",
            subscriptionPassword: "passx",
            allowUnsecureConnection: true
        };
        window.esDeviceMode = "";
        window.esGridHeight = "";
        window.esWebApiToken = "";
        window.esDef = [{
                    "AA": 100,
                    "ID": "PQ_250",
                    "Title": "A map view around sales",
                    "ESUIType": "esMap",
                    "Description": "Map to exloit your sales performcance",
                    "esDef": {
                        GroupID: "ESCMS",
                        FilterID: "View_ES00GPSLog",
                        options: {
                            center: {
                                longitude: 0,
                                latitude: 0
                            },
                            zoom: 2,
                        },
                        mapType: "cluster",
                        typeOptions: null
                    }
                },
                {
                    "AA": 200,
                    "ID": "PQ_200",
                    "Title": "Οι καλύτεροί μου Πελάτες",
                    "Description": "Report Analysis on the best performant customers in terms of TurnOver and Profit.",
                    "ESUIType": "esGrid",
                    "esDef": {
                        "GroupID": "ESFICustomer",
                        "FilterID": "ESFITradeAccountCustomer_def",
                        "ServerSidePaging": true
                    }
                },
                {
                    "AA": 201,
                    "ID": "PQ_201",
                    "Title": "Sales vs Opportunities",
                    "Description": "Chart Analysis on the best performant customers in terms of TurnOver and Profit.",
                    "ESUIType": "esChart",
                    "esDef": {
                        "GroupID": "ESTMOpportunity",
                        "FilterID": "ESTMOpportunityManagement",
                        "options": {
                            autoBind: false,
                            title: "Leads by Lead Source",
                            series: [
                                {
                                    type: 'column',
                                    field: 'OppRevenue',
                                    categoryField: 'fLeadSourceCode',
                                    aggregate: 'sum',
                                    axis: "Revenue"
                                },
                                {
                                    type: 'line',
                                    field: 'OppRevenue',
                                    categoryField: 'fLeadSourceCode',
                                    aggregate: 'count',
                                    axis: "CountOf"
                                }
                            ],
                            valueAxes: [
                                {
                                    name: "Revenue",
                                    title: {
                                        text: "Turnover (euros)"
                                    }
                                },
                                {
                                    name: "CountOf",
                                    title: {
                                        text: "Count Of"
                                    }
                                }
                            ],
                            categoryAxis: {
                                labels: {
                                    rotation: 90
                                },
                                axisCrossingValues: [
                                    0,
                                    205
                                ]
                            },
                            tooltip: {
                                visible: true,
                                template: "#= category #: #= value #"
                            },
                            pannable: {
                                lock: "x"
                            },
                            zoomable: {
                                mousewheel: {
                                    lock: "x"
                                },
                                selection: {
                                    lock: "x"
                                }
                            }
                        }
                    }
                },
                {
                    "AA": 3,
                    "ID": "PQ_2",
                    "Title": "look at these ... Photos !!!",
                    "ESUIType": "esGrid",
                    "Description": "Image Gallery.",
                    "esDef": {
                        "GroupID": "ESMMStockItem",
                        "FilterID": "StockItemPhotoList",
                        "ServerSidePaging": true
                    }
                }];
        //window.esWebApiToken = "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1bmlxdWVfbmFtZSI6ImFkbWluIiwieC1lc3UtcGFzc3dvcmQiOiJlbnRlcnNvZnQiLCJ4LWVzdS1icmFuY2gtaWQiOiLOkc6YzpciLCJ4LWVzdS1sYW5nLWlkIjoiZWwtR1IiLCJ4LWVzbGktRVNTdWJzY3JpcHRpb25QYXNzd29yZCI6InBhc3N4IiwiaXNzIjoiRW50ZXJzb2Z0IiwiYXVkIjoiaHR0cDovLzE5Mi4xNjguMS4xOTAiLCJleHAiOjE0NTU2NDEzOTcsIm5iZiI6MTQ1NTYzMDU5N30.YGq5dCgPjE-uRqXmrwYx5Edo8y2u72b4i6bDbYi3DI4";
    };
    prepareMobileCall();
    </script>

    <script src="dist/es.all.js"></script>
    <!-- // <script src="lib/third/js/jquery.min.js"></script>
     <script src="lib/third/js/bootstrap.min.js"></script>
     <script src="lib/third/js/lodash.min.js"></script>
     <script src="lib/third/js/angular.min.js"></script>
     <script src="lib/third/js/angular-animate.min.js"></script>
     <script src="lib/third/js/ui-bootstrap-tpls.min.js"></script>
     <script src="lib/third/js/angular-sanitize.min.js"></script>
     <script src="lib/third/js/ngstorage.min.js"></script>
     <script src="lib/third/js/stacktrace.min.js"></script>
     <script src="lib/third/js/log4javascript.js"></script>
     <script src="lib/third/js/underscore-min.js"></script>
     <script src="lib/third/js/cache.js"></script>
     <script src="lib/third/js/moment-with-locales.min.js"></script>
 
    <script src="lib/telerik/js/jszip.min.js"></script>
    <script src="lib/telerik/js/cultures/kendo.culture.el-GR.min.js"></script>
    <script src="lib/telerik/js/kendo.all.min.js"></script>

    <script src="lib/eswebapi/dist/eswebapi.js"></script>
    <script src="lib/eswebapi/dist/eswebapi.templates.js"></script>
-->
    <script src="script.js" type="text/javascript"></script>
</body>

</html>
